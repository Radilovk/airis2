# –î–∏—Ä–µ–∫—Ç–Ω–∏ –†–µ–¥–∞–∫—Ç–æ—Ä—Å–∫–∏ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –Ω–∞ –ö–∞—Ä—Ç–∏ - –ö—Ä–∞—Ç—ä–∫ –ì–∞–π–¥

## –ö–∞–∫–≤–æ –µ–Ω–æ–≤–æ?

–í—Å—è–∫–∞ –∫–∞—Ä—Ç–∞ –≤ —Ä–µ–ø–æ—Ä—Ç —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ —Å–µ–≥–∞ –∏–º–∞ –≤–≥—Ä–∞–¥–µ–Ω–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä—Å–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, –¥–æ—Å—Ç—ä–ø–Ω–∏ —á—Ä–µ–∑ –±—É—Ç–æ–Ω —Å —Ç—Ä–∏ —Ç–æ—á–∫–∏ –≤ –≥–æ—Ä–Ω–∏—è –¥–µ—Å–µ–Ω —ä–≥—ä–ª.

## –ë—ä—Ä–∑–æ –ù–∞—á–∞–ª–æ

### 1. –ê–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ
```
–ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª ‚Üí Editor Mode ‚Üí ON
```

### 2. –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ –ö–∞—Ä—Ç–∞ —Å –†–µ–¥–∞–∫—Ç–æ—Ä—Å–∫–∏ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏

```tsx
import { EditableCard } from '@/components/report/withCardEditor'

<EditableCard cardId="my-card" editorMode={editorMode}>
  <Card>
    <CardHeader><CardTitle>–ú–æ—è—Ç–∞ –ö–∞—Ä—Ç–∞</CardTitle></CardHeader>
    <CardContent>–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ...</CardContent>
  </Card>
</EditableCard>
```

## –û—Å–Ω–æ–≤–Ω–∏ –§—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ò–∫–æ–Ω–∞ |
|---------|----------|-------|
| **–°–∫—Ä–∏–π/–ü–æ–∫–∞–∂–∏** | –ö–æ–Ω—Ç—Ä–æ–ª –Ω–∞ –≤–∏–¥–∏–º–æ—Å—Ç—Ç–∞ | üëÅÔ∏è |
| **–†–∞–∑–≥—ä–Ω–∏/–°–≤–∏–π** | –ö–æ–Ω—Ç—Ä–æ–ª –Ω–∞ expand state | ‚õ∂ |
| **–ö–æ–º–µ–Ω—Ç–∞—Ä–∏** | –î–æ–±–∞–≤–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –ø—Ä–æ–º–µ–Ω–∏ | üí¨ |
| **–ò–∑—Ç—Ä–∏–π** | –ü—Ä–µ–º–∞—Ö–Ω–∏ –∫–∞—Ä—Ç–∞—Ç–∞ | üóëÔ∏è |

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ –§–∞–π–ª–æ–≤–µ—Ç–µ

```
src/components/report/
‚îú‚îÄ‚îÄ CardEditorToolbar.tsx       # –†–µ–¥–∞–∫—Ç–æ—Ä—Å–∫–∏—è –ø–∞–Ω–µ–ª –∑–∞ –≤—Å—è–∫–∞ –∫–∞—Ä—Ç–∞
‚îú‚îÄ‚îÄ withCardEditor.tsx          # HOC –∑–∞ –æ–±–≤–∏–≤–∞–Ω–µ –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
‚îî‚îÄ‚îÄ tabs/
    ‚îî‚îÄ‚îÄ OverviewTabWithEditor.tsx  # –ü—Ä–∏–º–µ—Ä –∑–∞ —Ç–∞–± —Å editable cards
```

## API

### EditableCard Props

```typescript
{
  cardId: string              // –£–Ω–∏–∫–∞–ª–µ–Ω ID (–ó–ê–î–™–õ–ñ–ò–¢–ï–õ–ù–û)
  editorMode?: boolean        // –ê–∫—Ç–∏–≤–Ω–∏ –ª–∏ —Å–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏—Ç–µ
  defaultVisible?: boolean    // –í–∏–¥–∏–º–∞ –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ
  defaultExpanded?: boolean   // –†–∞–∑–≥—ä–Ω–∞—Ç–∞ –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ
  compact?: boolean          // –ö–æ–º–ø–∞–∫—Ç–µ–Ω —Ä–µ–∂–∏–º (3 —Ç–æ—á–∫–∏)
  position?: Position        // –ü–æ–∑–∏—Ü–∏—è –Ω–∞ –ø–∞–Ω–µ–ª–∞
  onDelete?: (id) => void    // Callback –ø—Ä–∏ –∏–∑—Ç—Ä–∏–≤–∞–Ω–µ
}
```

## Persistence

–í—Å–∏—á–∫–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ –∑–∞–ø–∞–∑–≤–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤:
```typescript
useKV<Record<string, CardEditorState>>('card-editor-states', {})
```

## –ü—Ä–∏–º–µ—Ä–∏

### –û—Å–Ω–æ–≤–Ω–∞ –ö–∞—Ä—Ç–∞
```tsx
<EditableCard cardId="health-score" editorMode={true}>
  <Card>...</Card>
</EditableCard>
```

### –ö–∞—Ä—Ç–∞ —Å –í—ä–∑–º–æ–∂–Ω–æ—Å—Ç –∑–∞ –ò–∑—Ç—Ä–∏–≤–∞–Ω–µ
```tsx
<EditableCard 
  cardId="optional-card" 
  editorMode={true}
  onDelete={(id) => console.log('–ò–∑—Ç—Ä–∏—Ç–∞:', id)}
>
  <Card>...</Card>
</EditableCard>
```

### –°–≤–∏—Ç–∞ –ø–æ –ü–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ
```tsx
<EditableCard 
  cardId="details-card" 
  editorMode={true}
  defaultExpanded={false}
>
  <Card>...</Card>
</EditableCard>
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –¢–∞–±

```tsx
export default function MyTab({ report, editorMode }) {
  return (
    <div className="space-y-6">
      <EditableCard cardId="card-1" editorMode={editorMode}>
        <Card>...</Card>
      </EditableCard>
      
      <EditableCard cardId="card-2" editorMode={editorMode}>
        <Card>...</Card>
      </EditableCard>
    </div>
  )
}
```

## –í–∏–∑—É–∞–ª–µ–Ω –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä

–í Editor Mode –≤—Å—è–∫–∞ –∫–∞—Ä—Ç–∞ –∏–º–∞:
- ‚ú® –°—É–±—Ç–∏–ª–µ–Ω border —Å–≤–µ—Ç–ª–∏–Ω–∞ (ring-2 ring-primary/20)
- üéØ Hover –µ—Ñ–µ–∫—Ç (hover:ring-primary/40)
- üìå –ë—É—Ç–æ–Ω —Å 3 —Ç–æ—á–∫–∏ –≤ –≥–æ—Ä–Ω–∏—è –¥–µ—Å–µ–Ω —ä–≥—ä–ª
- üî¥ Badge —Å –±—Ä–æ–π –Ω–µ—Ä–µ—à–µ–Ω–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä–∏

## Workflow –∑–∞ –†–µ–¥–∞–∫—Ç–æ—Ä

1. ‚úÖ –í–∫–ª—é—á–∏ Editor Mode
2. üìù –†–∞–∑–≥–ª–µ–¥–∞–π –≤—Å–∏—á–∫–∏ –∫–∞—Ä—Ç–∏
3. üí¨ –î–æ–±–∞–≤–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä–∏ –∫—ä–¥–µ –µ –Ω—É–∂–Ω–∞ –ø—Ä–æ–º—è–Ω–∞
4. üëÅÔ∏è –°–∫—Ä–∏–π –Ω–µ–Ω—É–∂–Ω–∏ –∫–∞—Ä—Ç–∏
5. ‚õ∂ –ü—Ä–æ–º–µ–Ω–∏ expand state –∫—ä–¥–µ—Ç–æ –µ –Ω—É–∂–Ω–æ
6. ‚úÖ –ú–∞—Ä–∫–∏—Ä–∞–π –∫–æ–º–µ–Ω—Ç–∞—Ä–∏—Ç–µ –∫–∞—Ç–æ —Ä–µ—à–µ–Ω–∏ —Å–ª–µ–¥ –ø—Ä–æ–º–µ–Ω–∏
7. üëÄ –ò–∑–∫–ª—é—á–∏ Editor Mode –∑–∞ –ø—Ä–µ–≥–ª–µ–¥

## –ó–∞ AI –ê—Å–∏—Å—Ç–µ–Ω—Ç–∞

–ö–æ–≥–∞—Ç–æ –ø–æ–ª—É—á–∏—à –∑–∞–¥–∞—á–∞ –∑–∞ —Ä–µ–¥–∞–∫—Ü–∏—è:
1. –ü—Ä–æ–≤–µ—Ä–∏ card states –∑–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä–∏
2. –ò–∑–ø—ä–ª–Ω–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏—Ç–µ —Ç–æ—á–Ω–æ –∫–∞–∫—Ç–æ —Å–∞ –¥–∞–¥–µ–Ω–∏
3. –ó–∞–ø–∞–∑–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –∏ ID –Ω–∞ –∫–∞—Ä—Ç–∏—Ç–µ
4. –£–≤–µ–¥–æ–º–∏ —Å–ª–µ–¥ –∑–∞–≤—ä—Ä—à–≤–∞–Ω–µ

## –ü—ä–ª–Ω–∞ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í–∏–∂ [CARD_EDITOR_GUIDE.md](./CARD_EDITOR_GUIDE.md) –∑–∞ –ø—ä–ª–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.
